(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["squeezenet"],{"3b1b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-column"},[a("h1",{staticClass:"headline"},[t._v("SqueezeNet Inference")]),a("div",{staticClass:"d-flex justify-center flex-wrap"},[a("div",{staticClass:"ma-4 d-flex flex-column justify-space-around",style:{width:t.width+"px"}},[a("v-select",{ref:"select",staticClass:"pa-0 shrink",attrs:{"hide-details":"",label:"Select image",items:t.items,"prepend-icon":"mdi-image"},on:{change:t.select}}),a("p",{staticClass:"mx-0 ma-4 mb-2 overline align-self-center"},[t._v("- or -")]),a("v-file-input",{ref:"upload",staticClass:"pa-0 shrink",attrs:{"hide-details":"",label:"Upload image"},on:{change:t.upload}})],1),a("v-card",{staticClass:"mx-2",attrs:{height:t.height}},[a("canvas",{ref:"canvas",attrs:{height:t.height,width:t.width}})])],1),a("v-btn",{staticClass:"ma-8 align-self-center",attrs:{disabled:!t.canRun,color:"primary","x-large":""},on:{click:t.run}},[t._v("Predict")]),t.output?a("v-container",{staticClass:"shrink align-self-center",attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"body-1 font-weight-bold"},[t._v("Inference time:")]),a("v-col",{staticClass:"text-right font-weight-regular"},[t._v(t._s(Math.round(t.output.time))+"ms")])],1),a("v-row",[a("v-col",[a("p",{staticClass:"body-1 font-weight-bold ma-0"},[t._v("Predictions:")])]),a("v-col",{staticClass:"text-right"},[t._v(t._s(t.output.predictions[0].label)+": "+t._s(Math.round(100*t.output.predictions[0].score))+"%")])],1),t._l(t.output.predictions.slice(1),(function(e,n){return a("v-row",{key:n},[a("v-col"),a("v-col",{staticClass:"text-right"},[t._v(t._s(e.label)+": "+t._s(Math.round(100*e.score))+"%")])],1)}))],2):t._e()],1)},r=[],i=(a("4160"),a("a630"),a("a15b"),a("d81d"),a("13d5"),a("fb6a"),a("d3b7"),a("ac1f"),a("3ca3"),a("5319"),a("1276"),a("498a"),a("cfc3"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("159b"),a("ddb0"),a("2b3d"),a("3835")),s=(a("96cf"),a("1da1")),c=a("5a70");function l(t){return window.location.href.replace(/\/$/,"")+"/"+t}function o(t,e){var a=new Image;a.src=t,a.onload=function(){var t=e.getContext("2d");t.drawImage(a,0,0,a.width,a.height,0,0,e.width,e.height)}}function u(t){for(var e=t.getContext("2d"),a=e.getImageData(0,0,t.width,t.height).data,n=[.485,.456,.406],r=[.229,.224,.225],i=a.length/4,s=new Float32Array(3*i),c=0,l=0;l<3;l++)for(var o=0;o<t.height;o++)for(var u=0;u<t.width;u++){var d=a[4*(o*t.width+u)+l];s[c]=(d/255-n[l])/r[l],c++}return[s,[1,3,t.height,t.width]]}function d(t){var e=t.map((function(t){return Math.exp(t)})),a=e.reduce((function(t,e){return t+e}),0);return e.map((function(t){return t/a}))}function f(t,e){var a=Array.from(t).map((function(t,e){return[t,e]}));return a.sort((function(t,e){return e[0]-t[0]})),a.slice(0,e)}var h={name:"SqueezenetDemo",data:function(){return{width:224,height:224,k:5,items:[{text:"Cat",value:l("cat.png")},{text:"Dog",value:l("dog.png")},{text:"Cheetah",value:l("cheetah.png")},{text:"Bird",value:l("bird.png")}],output:null,model:null,labels:[]}},computed:{canRun:function(){return null!==this.model&&this.labels.length>0}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new c["Model"](l("squeezenet1_1.onnx"));case 2:return t.model=e.sent,e.next=5,fetch(l("synset.txt"));case 5:if(a=e.sent,!(a.status<200&&a.status>=300)){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,a.text();case 10:n=e.sent,n.split("\n").forEach((function(e){if(0!=e.trim().length){var a=e.split(" ").slice(1).join(" ").split(",")[0];t.labels.push(a)}}));case 12:case"end":return e.stop()}}),e)})))()},methods:{upload:function(t){null!==t&&(o(URL.createObjectURL(t),this.$refs.canvas),this.$refs.select.internalValue=null)},select:function(t){null!==t&&(this.$refs.upload.internalValue=null,o(t,this.$refs.canvas))},predict:function(t,e){var a=new c["Tensor"](t,e),n=this.model.predict(a),r=d(n.data());return r},run:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,r,s,c,l,o,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=u(t.$refs.canvas),n=Object(i["a"])(a,2),r=n[0],s=n[1],c=performance.now(),e.next=4,t.predict(r,s);case 4:l=e.sent,o=performance.now(),d=f(l,t.k),t.output={time:o-c,predictions:d.map((function(e){var a=Object(i["a"])(e,2),n=a[0],r=a[1];return{label:t.labels[r],score:n}}))};case 8:case"end":return e.stop()}}),e)})))()}}},p=h,v=(a("c141"),a("2877")),m=a("6544"),g=a.n(m),b=a("8336"),w=a("b0af"),x=a("62ad"),C=a("a523"),_=a("23a7"),k=a("0fd9"),y=a("b974"),j=Object(v["a"])(p,n,r,!1,null,"3228ad32",null);e["default"]=j.exports;g()(j,{VBtn:b["a"],VCard:w["a"],VCol:x["a"],VContainer:C["a"],VFileInput:_["a"],VRow:k["a"],VSelect:y["a"]})},bf28:function(t,e,a){},c141:function(t,e,a){"use strict";var n=a("bf28"),r=a.n(n);r.a}}]);
//# sourceMappingURL=squeezenet.65a07e94.js.map